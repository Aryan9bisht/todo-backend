<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo-list</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/home.js"></script>
</head>

<body>
    <div id="tab">
        <h1>Todo-list</h1>
        <form action="/add-task" method="POST">
            <div>
                <input type="text" name="desc" id="description" value='<%= todolist.desc %>'></div>

            <div class="select_and_input">
                <select name="cat" required>
                    <option value="" disabled selected><%= todolist.cat %></option>
                    <option>Personal</option>
                    <option>Work</option>
                    <option>Claeaning</option>
                    <option>Otheres</option>
                </select>
                <input type="date" required name="date" value='<%= todolist.date %>'>
            </div>
            <div> <button type="submit" id="add">Add task</button>


        </form>
        <form action="/delete-task" method="get" class="aform">
            <button type="delete" id="delete">delete</button>

            </div>
            <% if(todolist.length!=0){ %>

                <!-- loop to iterate over the tasks-->
                <% for(let i of todolist) { %>

                    <!-- this div with task-card class holds the task  -->

                    <!-- this task card div is further divided into 3 divs inline flex divs-->

                    <!-- 1. tick box  to hold checkbox-->
                    <!-- 2. task-body to hold task details -->
                    <!-- 3. tag-box to hold category and priority tags of the task -->

                    <div class="card task-card">
                        <div class="tick-box">
                            <input type="checkbox" class="select-task" id="checkbox" name="<%= i._id%>">
                        </div>

                        <div class="card-body task-body">
                            <h5 class="card-title ">
                                <%= i.title %>
                            </h5>
                            <p class="text-muted">
                                <%= i.desc %>
                            </p>
                            <p class="text-muted"><i class="far fa-calendar-alt"></i>
                                <%= i.date %>
                            </p>
                        </div>

                        <div class="tag-box">

                            <!-- *********giving colors to baddges according to their priority******** -->

                            <% if(i.p==' 1 ') {%>
                                <h5><span class="badge badge-danger">P : <%= i.p %></span></h5>
                                <% }%>

                                    <% if(i.p=='2 ') {%>
                                        <h5><span class="badge badge-warning">P : <%= i.p %></span></h5>
                                        <% }%>

                                            <% if(i.p=='3 ') {%>
                                                <h5><span class="badge badge-info">P : <%= i.p %></span></h5>
                                                <% }%>

                                                    <% if(i.p=='0 ') {%>
                                                        <h5><span class="badge badge-light">P : NULL</span></h5>
                                                        <% }%>

                                                            <!-- *********giving colors to baddges according to their category******** -->

                                                            <% if(i.cat=='Personal ') {%>
                                                                <h4><span class="badge badge-info"> <%= i.cat %> </span></h4>
                                                                <% }%>

                                                                    <% if(i.cat=='Professional ') {%>
                                                                        <h4><span class="badge badge-success"> <%= i.cat %> </span></h4>
                                                                        <% }%>

                                                                            <% if(i.cat=='Academics ') {%>
                                                                                <h4><span class="badge badge-primary"> <%= i.cat %> </span></h4>
                                                                                <% }%>

                                                                                    <% if(i.cat=='Social ') {%>
                                                                                        <h4><span class="badge badge-dark"> <%= i.cat %> </span></h4>
                                                                                        <% }%>

                                                                                            <% if(i.cat=='Other ') {%>
                                                                                                <h4><span class="badge badge-default"> <%= i.cat %> </span></h4>
                                                                                                <% }%>

                        </div>

                    </div>


                    <% } %>
                        <% } %>

                            <!-- if task list is empty then no task added message will be printed -->
                            <% if( todolist.length==0 ) {%>
                                <h1 style="text-align: center;">No task Added Yet!</h1>

                                <% } %>
        </form>

    </div>
</body>

</html>